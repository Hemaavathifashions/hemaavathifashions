<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hemaavathi Fashions</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* New styles for multi-level navigation */
    .category-nav {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }
    
    .breadcrumbs {
      margin: 10px 0;
      font-size: 14px;
      color: #555;
    }
    
    .breadcrumbs a {
      color: #bb3952;
      text-decoration: none;
      margin: 0 5px;
    }
    
    .breadcrumbs a:first-child {
      margin-left: 0;
    }
    
    .breadcrumbs a:hover {
      text-decoration: underline;
    }
    
    .category-level {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .category-btn {
      padding: 10px 15px;
      background: #f8f8f8;
      border: 1px solid #e1e1e1;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      color: #333;
    }
    
    .category-btn:hover {
      background: #e8e8e8;
    }
    
    .category-btn.active {
      background: #bb3952;
      color: white;
      border-color: #bb3952;
    }
    
    /* Updated product card styles */
    .product-card {
      border: 1px solid #eee;
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .prod-info {
      padding: 15px;
    }
    
    .prod-name {
      font-weight: 600;
      display: block;
      margin-bottom: 5px;
      color: #333;
    }
    
    .prod-price {
      color: #bb3952;
      font-weight: 700;
      display: block;
      margin-bottom: 5px;
    }
    
    .prod-sizes {
      display: block;
      font-size: 13px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="background-design"></div>
  <div class="center-content">
    <header>
      <div class="header-content">
        <img src="assets/logo.png" alt="Hemaavathi Fashions Logo" class="logo">
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h1>Welcome to <span class="brand">Hemaavathi Fashions</span></h1>
        <p>Trendy collections for Women, Men, and Kids at affordable prices.</p>
      </div>
    </section>

    <section class="categories">
      <div class="category-nav">
        <div class="breadcrumbs" id="breadcrumbs">
          <a href="#" onclick="event.preventDefault(); navigateTo([])">Home</a>
        </div>
        <div class="category-level" id="category-level-1"></div>
        <div class="category-level" id="category-level-2"></div>
        <div class="category-level" id="category-level-3"></div>
      </div>
    </section>

    <section id="category-header" class="category-header" style="display:none;"></section>

    <main>
      <div id="product-list" class="product-grid"></div>
    </main>

    <section id="offers-section" class="offers-section">
      <h2>Current Offers</h2>
      <div class="offers-spacer"></div>
      <div id="offers-list" class="offers-list"></div>
    </section>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links-social">
        <div class="footer-links">
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact</a>
          <a href="policy.html">Policy</a>
          <a href="https://wa.me/919492324225" class="whatsapp-btn" target="_blank" title="WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
        <div class="footer-social">
          <a href="https://www.instagram.com/hemaavathi__fashions" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://www.facebook.com/profile.php?id=61574970737394" target="_blank"><i class="fab fa-facebook-f"></i></a>
          <a href="https://www.youtube.com/@Hemaavathifashions" target="_blank"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let allProducts = [];
      let categoryHeaders = {};
      let allOffers = [];
      let subCategories = {};
      let currentPath = [];

      // Load all data
      Promise.all([
        fetch('products.json').then(r => r.json()),
        fetch('categoryHeaders.json').then(r => r.json()),
        fetch('offers.json').then(r => r.json()),
        fetch('subCategories.json').then(r => r.json())
      ])
      .then(([products, headers, offers, subCats]) => {
        allProducts = products;
        categoryHeaders = headers;
        allOffers = offers;
        subCategories = subCats;
        
        renderOffers();
        renderMainCategories();
        renderProducts();
      })
      .catch(error => console.error('Error loading data:', error));

      // Handle navigation events
      document.addEventListener('navigateTo', function(e) {
        currentPath = e.detail;
        updateBreadcrumbs();
        renderCategoryLevels();
        renderProducts();
        renderCategoryHeader();
      });

      function renderMainCategories() {
        const container = document.getElementById('category-level-1');
        container.innerHTML = '';
        
        Object.keys(categoryHeaders).forEach(category => {
          const btn = document.createElement('button');
          btn.className = 'category-btn';
          btn.textContent = category;
          btn.onclick = () => navigateTo([category]);
          container.appendChild(btn);
        });
      }

      function navigateTo(path) {
        document.dispatchEvent(new CustomEvent('navigateTo', { detail: path }));
      }

      function updateBreadcrumbs() {
        const breadcrumbs = document.getElementById('breadcrumbs');
        breadcrumbs.innerHTML = '<a href="#" onclick="event.preventDefault(); navigateTo([])">Home</a>';
        
        currentPath.forEach((segment, index) => {
          const link = document.createElement('a');
          link.href = '#';
          link.textContent = segment;
          link.onclick = (e) => {
            e.preventDefault();
            navigateTo(currentPath.slice(0, index + 1));
          };
          breadcrumbs.appendChild(document.createTextNode(' > '));
          breadcrumbs.appendChild(link);
        });
      }

      function renderCategoryLevels() {
        // Clear all levels first
        document.getElementById('category-level-2').innerHTML = '';
        document.getElementById('category-level-3').innerHTML = '';
        
        if (currentPath.length === 0) return;
        
        // Level 2 (subcategories)
        const level1 = currentPath[0];
        let currentData = subCategories[level1];
        
        if (currentPath.length === 1 && currentData) {
          const container = document.getElementById('category-level-2');
          
          Object.keys(currentData).forEach(subCat => {
            const btn = document.createElement('button');
            btn.className = 'category-btn';
            btn.textContent = subCat;
            btn.onclick = () => navigateTo([...currentPath, subCat]);
            container.appendChild(btn);
          });
        }
        
        // Level 3 (sub-subcategories or variants)
        if (currentPath.length === 2) {
          const level2 = currentPath[1];
          let variants = currentData[level2];
          
          if (Array.isArray(variants)) {
            const container = document.getElementById('category-level-3');
            
            variants.forEach(variant => {
              const btn = document.createElement('button');
              btn.className = 'category-btn';
              btn.textContent = variant;
              btn.onclick = () => navigateTo([...currentPath, variant]);
              container.appendChild(btn);
            });
          }
        }
      }

      function renderCategoryHeader() {
        const headerEl = document.getElementById('category-header');
        if (currentPath.length === 0) {
          headerEl.style.display = "none";
          return;
        }
        
        const mainCategory = currentPath[0];
        let header = categoryHeaders[mainCategory];
        
        if (header) {
          let html = `<div class="cat-header-content">`;
          if (header.image) {
            html += `<img src="${header.image}" class="cat-header-img" alt="${mainCategory}">`;
          }
          html += `<div class="cat-header-text"><h2>${header.title || mainCategory}</h2><p>${header.text || ''}</p></div></div>`;
          headerEl.innerHTML = html;
          headerEl.style.display = "flex";
        } else {
          headerEl.style.display = "none";
        }
      }

      function renderProducts() {
        const container = document.getElementById('product-list');
        container.innerHTML = '';
        
        if (currentPath.length === 0) {
          container.innerHTML = '<p style="text-align:center; color:#666;">Please select a category to view products</p>';
          return;
        }
        
        const categoryPath = currentPath.join('/');
        const toShow = allProducts.filter(p => p.category.startsWith(categoryPath));
        
        if (toShow.length === 0) {
          container.innerHTML = '<p style="color: #bb3952; text-align:center;">No products found in this category.</p>';
          return;
        }
        
        toShow.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';
          card.innerHTML = `
            <div class="img-wrap">
              <img src="${product.image}" alt="${product.name}" loading="lazy">
            </div>
            <div class="prod-info">
              <span class="prod-name">${product.name}</span>
              <span class="prod-price">₹${product.price}</span>
              ${product.sizes ? `<span class="prod-sizes">Sizes: ${product.sizes.join(', ')}</span>` : ''}
            </div>
          `;
          container.appendChild(card);
        });
      }

      function renderOffers() {
        const offersSection = document.getElementById('offers-section');
        const offersList = document.getElementById('offers-list');
        offersList.innerHTML = '';
        
        if (!allOffers || !allOffers.length) {
          offersSection.style.display = 'none';
          return;
        }
        
        allOffers.forEach(offer => {
          let offerHtml = `<div class="offer-card">`;
          if (offer.image) offerHtml += `<img src="${offer.image}" alt="Offer" class="offer-img" loading="lazy">`;
          offerHtml += `<div class="offer-text"><h3>${offer.title || 'Special Offer'}</h3><p>${offer.text || ''}</p></div></div>`;
          offersList.innerHTML += offerHtml;
        });
        
        offersSection.style.display = 'flex';
      }
    });
    
    // Make navigateTo available globally for breadcrumbs
    window.navigateTo = function(path) {
      document.dispatchEvent(new CustomEvent('navigateTo', { detail: path }));
    };
  </script>
</body>
</html>
