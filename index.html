<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hemaavathi Fashions</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Navigation Styles */
    .category-nav {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 20px 0;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .nav-level {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .category-btn {
      padding: 10px 15px;
      background: #f8f8f8;
      border: 1px solid #e1e1e1;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
      color: #333;
    }
    
    .category-btn:hover {
      background: #e8e8e8;
    }
    
    .category-btn.selected {
      background: #bb3952;
      color: white;
      border-color: #bb3952;
      font-weight: 600;
    }
    
    .category-btn.sub-selected {
      background: #e8c8cf;
      color: #bb3952;
      border-color: #d9a5b2;
    }
    
    /* Product Grid Styles */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .product-card {
      border: 1px solid #eee;
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s;
      background: white;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .img-wrap {
      height: 200px;
      overflow: hidden;
    }
    
    .img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .prod-info {
      padding: 15px;
    }
    
    .prod-name {
      font-weight: 600;
      display: block;
      margin-bottom: 5px;
      color: #333;
    }
    
    .prod-price {
      color: #bb3952;
      font-weight: 700;
      display: block;
      margin-bottom: 5px;
    }
    
    .prod-sizes {
      display: block;
      font-size: 13px;
      color: #666;
    }
    
    /* Category Header */
    .category-header {
      background: #f9f3f4;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }
    
    .cat-header-content {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .cat-header-img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 4px;
    }
    
    /* Offers Section */
    .offers-section {
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <div class="background-design"></div>
  <div class="center-content">
    <header>
      <div class="header-content">
        <img src="assets/logo.png" alt="Hemaavathi Fashions Logo" class="logo">
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h1>Welcome to <span class="brand">Hemaavathi Fashions</span></h1>
        <p>Trendy collections for Women, Men, and Kids at affordable prices.</p>
      </div>
    </section>

    <section class="categories">
      <div class="category-nav">
        <div class="nav-level" id="level-1"></div>
        <div class="nav-level" id="level-2"></div>
        <div class="nav-level" id="level-3"></div>
      </div>
    </section>

    <section id="category-header" class="category-header"></section>

    <main>
      <div id="product-list" class="product-grid"></div>
    </main>

    <section id="offers-section" class="offers-section">
      <h2>Current Offers</h2>
      <div class="offers-spacer"></div>
      <div id="offers-list" class="offers-list"></div>
    </section>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-links-social">
        <div class="footer-links">
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact</a>
          <a href="policy.html">Policy</a>
          <a href="https://wa.me/919492324225" class="whatsapp-btn" target="_blank" title="WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
        <div class="footer-social">
          <a href="https://www.instagram.com/hemaavathi__fashions" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://www.facebook.com/profile.php?id=61574970737394" target="_blank"><i class="fab fa-facebook-f"></i></a>
          <a href="https://www.youtube.com/@Hemaavathifashions" target="_blank"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let allProducts = [];
      let categoryHeaders = {};
      let allOffers = [];
      let subCategories = {};
      let currentPath = [];
      let selectedButtons = {};

      // Load all data
      Promise.all([
        fetch('products.json').then(r => r.json()),
        fetch('categoryHeaders.json').then(r => r.json()),
        fetch('offers.json').then(r => r.json()),
        fetch('subCategories.json').then(r => r.json())
      ])
      .then(([products, headers, offers, subCats]) => {
        allProducts = products;
        categoryHeaders = headers;
        allOffers = offers;
        subCategories = subCats;
        
        renderOffers();
        renderNavigation();
        renderProducts();
      })
      .catch(error => console.error('Error loading data:', error));

      function renderNavigation() {
        // Level 1 - Main Categories
        const level1 = document.getElementById('level-1');
        level1.innerHTML = '';
        
        Object.keys(categoryHeaders).forEach(category => {
          const btn = createCategoryButton(category, 0);
          btn.onclick = () => {
            currentPath = [category];
            updateSelections();
            renderProducts();
            renderCategoryHeader();
          };
          level1.appendChild(btn);
        });

        // Level 2 - Sub Categories
        const level2 = document.getElementById('level-2');
        level2.innerHTML = '';
        
        if (currentPath.length >= 1) {
          const mainCategory = currentPath[0];
          const subCats = subCategories[mainCategory];
          
          if (subCats) {
            Object.keys(subCats).forEach(subCat => {
              const btn = createCategoryButton(subCat, 1);
              btn.onclick = () => {
                currentPath = [mainCategory, subCat];
                updateSelections();
                renderProducts();
              };
              level2.appendChild(btn);
            });
          }
        }

        // Level 3 - Variants
        const level3 = document.getElementById('level-3');
        level3.innerHTML = '';
        
        if (currentPath.length >= 2) {
          const mainCategory = currentPath[0];
          const subCat = currentPath[1];
          const variants = subCategories[mainCategory][subCat];
          
          if (Array.isArray(variants)) {
            variants.forEach(variant => {
              const btn = createCategoryButton(variant, 2);
              btn.onclick = () => {
                currentPath = [mainCategory, subCat, variant];
                updateSelections();
                renderProducts();
              };
              level3.appendChild(btn);
            });
          }
        }
      }

      function createCategoryButton(text, level) {
        const btn = document.createElement('button');
        btn.className = 'category-btn';
        btn.textContent = text;
        btn.dataset.level = level;
        btn.dataset.path = text.toLowerCase().replace(/ /g, '-');
        return btn;
      }

      function updateSelections() {
        // Clear all selections
        document.querySelectorAll('.category-btn').forEach(btn => {
          btn.classList.remove('selected', 'sub-selected');
        });

        // Update selections based on current path
        currentPath.forEach((segment, index) => {
          document.querySelectorAll(`.category-btn[data-path="${segment.toLowerCase().replace(/ /g, '-')}"]`).forEach(btn => {
            if (parseInt(btn.dataset.level) === index) {
              btn.classList.add('selected');
            } else if (parseInt(btn.dataset.level) < index) {
              btn.classList.add('sub-selected');
            }
          });
        });

        renderNavigation();
      }

      function renderCategoryHeader() {
        const headerEl = document.getElementById('category-header');
        if (currentPath.length === 0) {
          headerEl.style.display = "none";
          return;
        }
        
        const mainCategory = currentPath[0];
        let header = categoryHeaders[mainCategory];
        
        if (header) {
          let html = `<div class="cat-header-content">`;
          if (header.image) {
            html += `<img src="${header.image}" class="cat-header-img" alt="${mainCategory}">`;
          }
          html += `<div class="cat-header-text"><h2>${header.title || mainCategory}</h2><p>${header.text || ''}</p></div></div>`;
          headerEl.innerHTML = html;
          headerEl.style.display = "flex";
        } else {
          headerEl.style.display = "none";
        }
      }

      function renderProducts() {
        const container = document.getElementById('product-list');
        container.innerHTML = '';
        
        if (currentPath.length === 0) {
          container.innerHTML = '<p style="text-align:center; color:#666; grid-column:1/-1">Please select a category to view products</p>';
          return;
        }
        
        const categoryPath = currentPath.join('/');
        const toShow = allProducts.filter(p => p.category.startsWith(categoryPath));
        
        if (toShow.length === 0) {
          container.innerHTML = '<p style="color: #bb3952; text-align:center; grid-column:1/-1">No products found in this category.</p>';
          return;
        }
        
        toShow.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';
          card.innerHTML = `
            <div class="img-wrap">
              <img src="${product.image}" alt="${product.name}" loading="lazy">
            </div>
            <div class="prod-info">
              <span class="prod-name">${product.name}</span>
              <span class="prod-price">â‚¹${product.price}</span>
              ${product.sizes ? `<span class="prod-sizes">Sizes: ${product.sizes.join(', ')}</span>` : ''}
            </div>
          `;
          container.appendChild(card);
        });
      }

      function renderOffers() {
        const offersSection = document.getElementById('offers-section');
        const offersList = document.getElementById('offers-list');
        offersList.innerHTML = '';
        
        if (!allOffers || !allOffers.length) {
          offersSection.style.display = 'none';
          return;
        }
        
        allOffers.forEach(offer => {
          let offerHtml = `<div class="offer-card">`;
          if (offer.image) offerHtml += `<img src="${offer.image}" alt="Offer" class="offer-img" loading="lazy">`;
          offerHtml += `<div class="offer-text"><h3>${offer.title || 'Special Offer'}</h3><p>${offer.text || ''}</p></div></div>`;
          offersList.innerHTML += offerHtml;
        });
        
        offersSection.style.display = 'flex';
      }
    });
  </script>
</body>
</html>
