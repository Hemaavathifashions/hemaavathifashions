<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Previous head content remains same -->
  <style>
    /* Add these new styles */
    .category-nav {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .category-level {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .category-btn {
      padding: 8px 15px;
      background: #f0f0f0;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .category-btn:hover, .category-btn.active {
      background: #bb3952;
      color: white;
    }
    .breadcrumbs {
      margin: 15px 0;
      font-size: 14px;
    }
    .breadcrumbs a {
      color: #bb3952;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- Previous content until categories section -->
  
  <section class="categories">
    <div class="category-nav">
      <div class="breadcrumbs" id="breadcrumbs"></div>
      <div class="category-level" id="category-level-1"></div>
      <div class="category-level" id="category-level-2"></div>
      <div class="category-level" id="category-level-3"></div>
    </div>
  </section>

  <!-- Rest of the content remains same until scripts -->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let allProducts = [];
      let categoryHeaders = {};
      let allOffers = [];
      let subCategories = {};
      let currentPath = [];

      // Load all data
      Promise.all([
        fetch('products.json').then(r => r.json()),
        fetch('categoryHeaders.json').then(r => r.json()),
        fetch('offers.json').then(r => r.json()),
        fetch('subCategories.json').then(r => r.json())
      ])
      .then(([products, headers, offers, subCats]) => {
        allProducts = products;
        categoryHeaders = headers;
        allOffers = offers;
        subCategories = subCats;
        
        renderOffers();
        renderMainCategories();
      })
      .catch(error => console.error('Error loading data:', error));

      function renderMainCategories() {
        const container = document.getElementById('category-level-1');
        container.innerHTML = '';
        
        Object.keys(categoryHeaders).forEach(category => {
          const btn = document.createElement('button');
          btn.className = 'category-btn';
          btn.textContent = category;
          btn.onclick = () => navigateTo([category]);
          container.appendChild(btn);
        });
      }

      function navigateTo(path) {
        currentPath = path;
        updateBreadcrumbs();
        renderCategoryLevels();
        renderProducts();
      }

      function updateBreadcrumbs() {
        const breadcrumbs = document.getElementById('breadcrumbs');
        breadcrumbs.innerHTML = '';
        
        if (currentPath.length === 0) return;
        
        let html = '<a href="#" onclick="event.preventDefault(); navigateTo([])">Home</a>';
        
        currentPath.forEach((segment, index) => {
          html += ` > <a href="#" onclick="event.preventDefault(); navigateTo(${JSON.stringify(currentPath.slice(0, index+1))})">${segment}</a>`;
        });
        
        breadcrumbs.innerHTML = html;
      }

      function renderCategoryLevels() {
        // Clear all levels first
        document.getElementById('category-level-2').innerHTML = '';
        document.getElementById('category-level-3').innerHTML = '';
        
        if (currentPath.length === 0) return;
        
        // Level 2 (subcategories)
        const level1 = currentPath[0];
        let currentData = subCategories[level1];
        
        if (currentPath.length === 1 && currentData) {
          const container = document.getElementById('category-level-2');
          
          Object.keys(currentData).forEach(subCat => {
            const btn = document.createElement('button');
            btn.className = 'category-btn';
            btn.textContent = subCat;
            btn.onclick = () => navigateTo([...currentPath, subCat]);
            container.appendChild(btn);
          });
        }
        
        // Level 3 (sub-subcategories or variants)
        if (currentPath.length === 2) {
          const level2 = currentPath[1];
          let variants = currentData[level2];
          
          if (Array.isArray(variants)) {
            const container = document.getElementById('category-level-3');
            
            variants.forEach(variant => {
              const btn = document.createElement('button');
              btn.className = 'category-btn';
              btn.textContent = variant;
              btn.onclick = () => navigateTo([...currentPath, variant]);
              container.appendChild(btn);
            });
          }
        }
      }

      function renderProducts() {
        const container = document.getElementById('product-list');
        container.innerHTML = '';
        
        if (currentPath.length === 0) {
          container.innerHTML = '<p style="text-align:center;">Please select a category to view products</p>';
          return;
        }
        
        const categoryPath = currentPath.join('/');
        const toShow = allProducts.filter(p => p.category.startsWith(categoryPath));
        
        if (toShow.length === 0) {
          container.innerHTML = '<p style="color: #bb3952; text-align:center;">No products found in this category.</p>';
          return;
        }
        
        toShow.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';
          card.innerHTML = `
            <div class="img-wrap">
              <img src="${product.image}" alt="${product.name}" loading="lazy">
            </div>
            <div class="prod-info">
              <span class="prod-name">${product.name}</span>
              <span class="prod-price">â‚¹${product.price}</span>
              ${product.sizes ? `<span class="prod-sizes">Sizes: ${product.sizes.join(', ')}</span>` : ''}
            </div>
          `;
          container.appendChild(card);
        });
      }

      // Keep the existing renderCategoryHeader and renderOffers functions
      // (modified to work with the new structure)
    });
    
    // Make navigateTo available globally for breadcrumbs
    window.navigateTo = function(path) {
      document.dispatchEvent(new CustomEvent('navigateTo', { detail: path }));
    };
  </script>
</body>
</html>
